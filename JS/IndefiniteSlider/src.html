<script type="text/javascript">
jQuery.fn.extend({sliderRange:function(e={}){$=jQuery;let t=$(this),n={},o=[];function i(){if(e.hasOwnProperty("values"))for(const n of Object.keys(e.values)){let o=t.find(`.slider-color-node[color-value="${n}"]`);o.length<=0&&(o=$(`<div class="slider-color-node" color-value="${n}"></div>`),t.prepend(o)),o.css({position:"absolute",top:0,bottom:0,left:a(n,"rightvalue",0,t.width()),width:a(n,"leftvalue",0,t.width())-a(n,"rightvalue",0,t.width()),zIndex:0,borderRadius:"50px",background:e.values[n].color})}}function l(e){let t=e.attr("handleindex");return o.push(o.includes(t)?o.splice(o.indexOf(t),1)[0]:t),o.indexOf(t)}function a(e,t,n,o){let i=0;switch(t){case"rightvalue":i=n;break;case"leftvalue":i=o}let l=$(`.slider-handle[${t}="${e}"]`);return l.length<=0?i:l.eq(0).position().left}function r(e){var r=0,s=0;e.on("touchstart mousedown",function(u){(u=u||window.event).preventDefault(),s=u.clientX||u.touches[0].clientX,e.css({zIndex:l(e)}),t.find(".slider-handle").each(function(){$(this).css({zIndex:o.indexOf($(this).attr("handleindex"))})}),$(document).on("touchend mouseup mouseleave",function(){$(document).unbind("mouseup touchend").unbind("mousemove touchmove")}),$(document).on("touchmove mousemove",function(){!function(o){(o=o||window.event).preventDefault();let l=o.clientX||o.touches[0].clientX;r=s-l,s=l,e.css({left:`${u=e.position().left-r,d=a(e.attr("leftvalue"),"rightvalue",0,e.parent().width()),c=a(e.attr("rightvalue"),"leftvalue",0,e.parent().width()),u<=d?d:u>=c?c:u}px`}),n[e.attr("leftvalue")].value=(e.position().left-a(e.attr("leftvalue"),"rightvalue",0,e.parent().width()))/e.parent().width(),n[e.attr("rightvalue")].value=(a(e.attr("rightvalue"),"leftvalue",0,e.parent().width())-e.position().left)/e.parent().width(),e.attr("handleposition",e.position().left),t.trigger("sliderChanged",[n]),i();var u,d,c}()})})}if(t.css({width:"100%",minHeight:"10px",backgroundColor:"#ddd",position:"relative",borderRadius:"50px",border:"1px solid #aaa"}),e.hasOwnProperty("values")){n=e.values;let o=0,a=0;for(const n of Object.keys(e.values))if(a<Object.keys(e.values).length-1){const i=$('<div class="slider-handle"><span></span></div>');o+=100*e.values[n].value,i.attr({leftvalue:Object.keys(e.values)[a],rightvalue:Object.keys(e.values)[a+1],handleindex:a}).css({position:"absolute",zIndex:l(i),left:`${o}%`,cursor:"pointer",height:"100%"}).appendTo(t).find("span").css({top:"-5px",bottom:"-5px",width:"15px",display:"block",background:"#eee",border:"1px solid #aaa",borderRadius:"4px",position:"absolute",left:0,transform:"translateX(-50%)"}),i.attr("handleposition",i.position().left),r(i),a++}return t.trigger("sliderInit",[n]),i(),$(window).on("resize",function(){i()}),t.on("colorSlider",function(){i()}),n}return new Error("No values defined")}});
</script>
