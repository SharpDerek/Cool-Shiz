<script type="text/javascript">
jQuery.fn.extend({sliderRange:function(e={}){$=jQuery;let t=$(this),n={},i=[];function o(){if(e.hasOwnProperty("values"))for(const n of Object.keys(e.values)){let i=t.find(`.slider-color-node[color-value="${n}"]`);i.length<=0&&(i=$(`<div class="slider-color-node" color-value="${n}"></div>`),t.prepend(i)),i.css({position:"absolute",top:0,bottom:0,left:a(n,"rightvalue",0,t.width()),width:a(n,"leftvalue",0,t.width())-a(n,"rightvalue",0,t.width()),zIndex:0,borderRadius:"50px",background:e.values[n].color})}}function l(e){let t=e.attr("handleindex");return i.push(i.includes(t)?i.splice(i.indexOf(t),1)[0]:t),i.indexOf(t)}function a(e,n,i,o){let l=0;switch(n){case"rightvalue":l=i;break;case"leftvalue":l=o}let a=t.find(`.slider-handle[${n}="${e}"]`);return a.length<=0?l:a.eq(0).position().left}function s(e){var s=0,r=0;e.on("touchstart mousedown",function(u){(u=u||window.event).preventDefault(),r=u.clientX||u.touches[0].clientX,e.css({zIndex:l(e)}),t.find(".slider-handle").each(function(){$(this).css({zIndex:i.indexOf($(this).attr("handleindex"))})}),$(document).on("touchend mouseup mouseleave",function(){$(document).unbind("mouseup touchend").unbind("mousemove touchmove")}),$(document).on("touchmove mousemove",function(){!function(i){(i=i||window.event).preventDefault();let l=i.clientX||i.touches[0].clientX;s=r-l,r=l,e.css({left:`${u=e.position().left-s,d=a(e.attr("leftvalue"),"rightvalue",0,e.parent().width()),c=a(e.attr("rightvalue"),"leftvalue",0,e.parent().width()),u<=d?d:u>=c?c:u}px`}),n[e.attr("leftvalue")].value=(e.position().left-a(e.attr("leftvalue"),"rightvalue",0,e.parent().width()))/e.parent().width(),n[e.attr("rightvalue")].value=(a(e.attr("rightvalue"),"leftvalue",0,e.parent().width())-e.position().left)/e.parent().width(),e.attr("handleposition",e.position().left),t.trigger("sliderChanged",[n]),o();var u,d,c}()})})}if(t.css({width:"100%",minHeight:"10px",backgroundColor:"#ddd",position:"relative",borderRadius:"50px",border:"1px solid #aaa"}),e.hasOwnProperty("values")){n=e.values;let i=0,a=0;for(const n of Object.keys(e.values))if(a<Object.keys(e.values).length-1){const o=$('<div class="slider-handle"><span></span></div>');i+=100*e.values[n].value,o.attr({leftvalue:Object.keys(e.values)[a],rightvalue:Object.keys(e.values)[a+1],handleindex:a}).css({position:"absolute",zIndex:l(o),left:`${i}%`,cursor:"pointer",height:"100%"}).appendTo(t).find("span").css({top:"-5px",bottom:"-5px",width:"15px",display:"block",background:"#eee",border:"1px solid #aaa",borderRadius:"4px",position:"absolute",left:0,transform:"translateX(-50%)"}),o.attr("handleposition",o.position().left),s(o),a++}return t.trigger("sliderInit",[n]),o(),$(window).on("resize",function(){o()}),n}return new Error("No values defined")}});
</script>
